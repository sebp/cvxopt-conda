# The language in this case has no bearing - we are going to be making use of conda.
language: generic

os: osx

# Set BINSTAR_TOKEN
env:
    global:
        secure: "Eez2PZP5ECGdwjI1DB6XbdrdMpCKMW9oYUNmYgVOZ/mC7VdOFd6qhzgUVe5/HyiggyiIbWFB64cxUDScHX65/SihSLDtbMSe7MZJuDBWgJOFMctUfSVCHKrasrLEG5qIEjtE7IUbWRZjByCbUtW2pLHx0cYGPdo+5bpNuDVUm/hMp2ScD4sKArL4xh2h6uvXTDQ5Je51eD1p7yvdPUX6eB9UDbPfTWZrUVWBRzW1C1s3TYkP8OMBrtUnORvsRRbh7/oStgSWDDmRAdE4UzjU2/Gn/X5ZhEJXoZnK7iqZAapsBskkTcXZww1HBexv3Tp/I43Bz4xhKu7af92UZqNQ8LckkqrszPyx7NgA0FMNWwPWaOoef94lorovVcP/tkhWhhJgqKON3FwTTuEAYtgOuYb2O2JQdYlysW8zt7IKG8noJUagRCUvZog8TpBsNy3Q0K2wH13WW7c043RznuUQWmlpj7osHiCttJq5xluTMXGM2101eonl4L9HfYOof7D8xgg+bgR7/QbkDNogi/bEITFhocxHxgZljYPT49w7xXBYDKYrBAF711hPdn6m2csLhfNLEGER+0I56THqS2FV1xYBUC2BuNFXdXv7Wegcj1dmQ746xhRIs/faVNO+eDuduI9fBe6Wlx3zGJw0TbOgJMZyKOBAOl0piwcpXuULMUc="


before_install:
    # Remove homebrew.
    - |
      echo ""
      echo "Removing homebrew from Travis CI to avoid conflicts."
      curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/uninstall > ~/uninstall_homebrew
      chmod +x ~/uninstall_homebrew
      ~/uninstall_homebrew -fq
      rm ~/uninstall_homebrew

install:
    # Install Miniconda.
    - ./install_miniconda.sh

script:
    - source ~/miniconda/bin/activate root
    - conda build ./recipe
    # from https://github.com/conda-forge/conda-forge-build-setup-feedstock/blob/master/recipe/upload_or_check_non_existence.py
    - ./upload_or_check_non_existence ./recipe sebp --channel=main
